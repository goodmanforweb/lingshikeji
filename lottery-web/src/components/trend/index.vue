<template>
    <div class="record trend" v-loading="exchangeLoader">
        <div class="record-tit f18 flex">
            <div class="tr-date">
                <CSelect @change="change" :value="activeroom" :options='options'></CSelect>
            </div>
            <div class="tr-tabs flex">
                <router-link to="/trend/normal" class="tr-tab" >
                                    
                    <svg width="26px" height="22px" viewBox="0 0 26 22" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g  stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g transform="translate(-679.000000, -102.000000)" fill="#B8B1A0">
                                <g transform="translate(679.000000, 102.000000)">
                                    <path d="M23.3623188,0 L2.63768116,0 C1.18695652,0 0,1.14640199 0,2.54755997 L0,16.1952026 C0,17.5963606 1.18695652,18.7427626 2.63768116,18.7427626 L8.9115942,18.7427626 L11.7942029,21.5268817 C12.1333333,21.8544251 12.5666667,22 13,22 C13.4333333,22 13.8666667,21.8362283 14.2057971,21.5268817 L17.0884058,18.7427626 L23.3623188,18.7427626 C24.8130435,18.7427626 26,17.5963606 26,16.1952026 L26,2.54755997 C26,1.14640199 24.8130435,0 23.3623188,0 Z M24.4927536,16.1952026 C24.4927536,16.7956989 23.984058,17.2870141 23.3623188,17.2870141 L16.4478261,17.2870141 L13.1318841,20.4896609 C13.0565217,20.5624483 12.9434783,20.5624483 12.8681159,20.4896609 L9.55217391,17.2870141 L2.63768116,17.2870141 C2.01594203,17.2870141 1.50724638,16.7956989 1.50724638,16.1952026 L1.50724638,2.54755997 C1.50724638,1.94706369 2.01594203,1.45574855 2.63768116,1.45574855 L23.3623188,1.45574855 C23.984058,1.45574855 24.4927536,1.94706369 24.4927536,2.54755997 L24.4927536,16.1952026 Z" id="形状" fill-rule="nonzero"></path>
                                    <polygon  points="15.5 12.7818182 9.59375 5 8 5 8 15 9.5 15 9.5 7.32727273 15.3125 15 17 15 17 5 15.5 5"></polygon>
                                </g>
                            </g>
                        </g>
                    </svg>
                    <span>{{$t('ms.normal')}}</span>
                </router-link>
                <router-link  to="/trend/mega" class="tr-tab" >

                    <svg width="23px" height="23px" viewBox="0 0 23 23" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" >
                            <g  transform="translate(-813.000000, -100.000000)" fill="#B8B1A0">
                                <g  transform="translate(813.000000, 100.000000)">
                                    <path d="M11.5,23 C5.1595425,23 0,17.8406729 0,11.50048 C0,5.16028718 5.1595425,0 11.5,0 C17.8404575,0 23,5.15836706 23,11.49952 C23,17.8406729 17.8414176,23 11.5,23 Z M11.5,1.80106022 C6.15131908,1.80106022 1.80017533,6.15202236 1.80017533,11.50048 C1.80017533,16.8489377 6.15131908,21.1998998 11.5,21.1998998 C16.8486809,21.1998998 21.1988646,16.8489377 21.1988646,11.50048 C21.1988646,6.15202239 16.8486809,1.80106022 11.5,1.80106022 Z" id="形状" fill-rule="nonzero"></path>
                                    <path d="M12.405806,3.87426824 C11.9926196,3.8732118 11.6579279,3.53775982 11.6568739,3.12363479 L11.6568739,0.750633472 C11.6568739,0.337352573 11.9944207,0 12.405806,0 C12.8181501,0 13.1547381,0.338313685 13.154738,0.750633472 L13.154738,3.12363479 C13.154738,3.53691569 12.8181501,3.87426826 12.405806,3.87426824 Z M9.46857292,3.89349062 C9.05538654,3.89243417 8.72069489,3.55698218 8.71964084,3.14285715 L8.71964084,0.769855831 C8.71964084,0.356574933 9.05718771,0.0192223595 9.46857292,0.0192223821 C9.88091708,0.0192223821 10.217505,0.357536068 10.217505,0.769855831 L10.217505,3.14285715 C10.216451,3.55698218 9.88175931,3.89243418 9.46857292,3.89349062 Z M12.405806,22 C11.9926196,21.9989436 11.6579279,21.6634916 11.6568739,21.2493666 L11.6568739,18.8763652 C11.6568739,18.4630843 11.9944207,18.1257318 12.405806,18.1257318 C12.8181501,18.1257318 13.1547381,18.4640454 13.154738,18.8763652 L13.154738,21.2493666 C13.153684,21.6634916 12.8189923,21.9989435 12.405806,22 Z M9.46857292,21.9769332 C9.05538654,21.9758767 8.72069489,21.6404247 8.71964084,21.2262997 L8.71964084,18.8532984 C8.71964084,18.4400175 9.05718771,18.1026649 9.46857292,18.1026649 C9.88091708,18.1026649 10.217505,18.4409786 10.217505,18.8532984 L10.217505,21.2262997 C10.2169767,21.6406436 9.88197766,21.9764037 9.46857292,21.9769332 Z M3.92877691,9.35072084 C3.92877691,9.76400174 3.59123005,10.1013543 3.17984484,10.1013543 L0.812222138,10.1013543 C0.39903575,10.1002979 0.0643440874,9.76484588 0.063290042,9.35072084 C0.063290042,8.93743994 0.40083691,8.60008737 0.812222138,8.60008737 L3.17984484,8.60008737 C3.59324958,8.60061689 3.9282486,8.93637696 3.92877691,9.35072084 Z M3.86548689,12.2936654 C3.86548689,12.7069463 3.52794003,13.0442988 3.1165548,13.0442988 L0.748932096,13.0442988 C0.335745708,13.0432424 0.00105404542,12.7077904 0,12.2936654 C0,11.8803845 0.337546868,11.5430319 0.748932096,11.5430319 L3.1165548,11.5430319 C3.52794003,11.5430319 3.86548689,11.8803845 3.86548689,12.2936654 Z M21.9261616,9.35072084 C21.9261616,9.76400174 21.5886147,10.1013543 21.1772295,10.1013543 L18.8096068,10.1013543 C18.3964205,10.1002979 18.0617288,9.76484588 18.0606747,9.35072084 C18.0606747,8.93743994 18.3982216,8.60008737 18.8096068,8.60008737 L21.1772295,8.60008737 C21.5904159,8.60114381 21.9251076,8.9365958 21.9261616,9.35072084 Z M22,12.2936654 C22,12.7069463 21.6624531,13.0442988 21.2510679,13.0442988 L18.8834452,13.0442988 C18.4702588,13.0432424 18.1355672,12.7077904 18.1345131,12.2936654 C18.1345131,11.8803845 18.47206,11.5430319 18.8834452,11.5430319 L21.2510679,11.5430319 C21.6624531,11.5430319 22,11.8803845 22,12.2936654 Z" id="形状" fill-rule="nonzero"></path>
                                    <path d="M11.0686725,7.34361574 C11.3057292,6.88546142 11.6949704,6.88546142 11.9320271,7.34361574 L12.9143979,9.24035604 C13.1514546,9.69851036 13.7806791,10.1334317 14.311374,10.2077772 L16.5082945,10.5116646 C17.0389893,10.5850808 17.158981,10.9372927 16.775593,11.2941513 L15.1854596,12.7708393 C14.801096,13.1276979 14.5611127,13.8321218 14.6518381,14.3358127 L15.0274218,16.4202755 C15.1181472,16.9239665 14.8040227,17.1414271 14.3289337,16.9035214 L12.3632167,15.9193725 C11.8881277,15.6814668 11.1115963,15.6814668 10.6365074,15.9193725 L8.67079031,16.9035214 C8.19570137,17.1414271 7.88157687,16.9239665 7.97230227,16.4202755 L8.34788592,14.3358127 C8.43861132,13.8321218 8.198628,13.1276979 7.81426449,12.7708393 L6.22510661,11.2941513 C5.84074307,10.9372927 5.96073473,10.5850808 6.49240512,10.5116646 L8.68932561,10.2077772 C9.22002044,10.134361 9.849245,9.69943967 10.0863017,9.24035604 L11.0686725,7.34361574 Z" id="路径"></path>
                                </g>
                            </g>
                        </g>
                    </svg>
                    <span>{{$t('ms.mega')}}</span>
                </router-link>
                <router-link  to="/trend/freq"  class="tr-tab" >

                    <svg width="17px" height="21px" viewBox="0 0 17 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g  stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" >
                            <g  transform="translate(-924.000000, -101.000000)" fill="#B8B1A0" fill-rule="nonzero">
                                <g  transform="translate(924.000000, 101.000000)">
                                    <path d="M13.5341711,0 C19.5537975,6.75668508 18.0292755,22.6834605 6.61577661,20.8548434 C-1.50620741,19.5536236 -1.92613826,8.3906762 4.12941626,4.5150405 C5.28057441,3.77821436 7.66010987,2.01294824 10.1830959,2.4724649 L9.96676458,2.4724649 C9.44336619,3.12760449 8.38106891,3.71685733 8.34535887,4.5150405 C11.4658449,4.77115352 12.6645292,2.20126728 13.5341711,0 Z M3.80517,10.5348994 C-3.13243114,18.2586458 12.7351862,23.1470951 13.4261253,14.0822935 C12.4620633,14.6786335 10.6728771,16.622444 9.53455977,14.9423972 C8.65399561,13.5849353 10.342374,11.5448955 10.7236735,10.5348994 C10.0750283,10.6782681 10.1878921,10.4059435 8.77778169,10.9648971 C7.62093347,11.5404741 6.32434085,13.9041825 4.45368432,13.2224065 C4.08433179,13.0486302 4.09191854,13.0474165 3.91321575,12.6848878 C3.58450029,12.0266272 3.94434758,11.1102597 3.80517,10.5348994 Z" id="形状"></path>
                                </g>
                            </g>
                        </g>
                    </svg>
                    <span>{{$t('ms.freq')}}</span>
                </router-link>
            </div>
        </div>
        <div class="trend-bd">
            <router-view></router-view>
        </div>
    </div>
</template>
<script>
import CSelect from '../widget/select/index';
import {mapGetters, mapActions} from 'vuex';
import util from 'util';
export default {
    data() {
        return {
            options: [],
            room_id: '',
            exchangeLoader: true
        }
    },
    components: {
        CSelect,
    },
    created() {
        
    },
    computed: {
      ...mapGetters(['roomList', 'activeroom','isMobile'])
    },
    methods: {
        change(e) {
            this.room_id = e.id;
            this.$store.commit('trendidChange', this.room_id)
        }
    },
    watch: {
        roomList: {
            deep: true,
            immediate: true,
            handler: function(n) {
                if(!util.isEmpty(n)) {
                    this.options = n.map(el => ({name: el.name, id: el.id}));
                }
            }
        },
        activeroom: {
            deep: true,
            immediate: true,
            handler: function(n) {
                if(!util.isEmpty(n)) {
                    this.exchangeLoader = false;
                    this.change({id: n.id});
                }
            }
        },

    }
}
</script>

<style lang="scss">
.trend-bd {
    background-color: #E8E8E8
}
.pc {
    .trend {
    border-radius: 8px;
    .record-tit {
        align-items: center;
        justify-content: space-between;

    }
    
}
}
.tr-tabs {
    color:#B8B1A0;
        .tr-tab {
            cursor: pointer;
            padding: 0 10px;
            transition: opacity .3 linear;
        }
        svg, span {
            vertical-align: middle
        }
        span {
            position: relative;
        }
        .tr-tab {
            opacity: 0.47;
        }
        .tr-tab.router-link-active {
            opacity: 1;
            span:after {
                content:'';
                position: absolute;
                bottom:-4px;
                right:0;
                width:16px;
                height: 2px;
                background-color: var(--goldcolor)
            }
        }
        
    }
</style>


